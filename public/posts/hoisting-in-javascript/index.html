<!DOCTYPE html>
<html lang="en-us">
<head>
	<title>Hoisting in JavaScript</title>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="In JavaScript, a variable can be declared after it has been used. In other words, a variable can be used before it has been declared, this is called hoisting. The term hoisting cannot be found in the official JavaScript documents, but the term was invented as a general way of thinking about what happens in the compilation phase when variables and function declarations are moved to the top of their containing scope. To be exact the variables are not being moved to the top of the scope, but they&#39;re being stored in memory doing the compile phase, so they can be used in the execution phase.">
	<meta property="article:published_time" content="17-07-2017 00:00:00">

	<link async href="https://fonts.googleapis.com/css2?family=Jura:wght@300;400;500;600;700" rel="stylesheet"> 
	<link async rel="stylesheet" href="/css/main.css" type="text/css" />
	<link async rel="icon" href="/favicon.ico">

	<script async src="https://kit.fontawesome.com/0d71694d01.js" crossorigin="anonymous"></script>
</head>
<body>
	<div class="grid-container">
		<header class="header">
    <div class="header-collection">
        <div class="header-item">
            <a class="header-item__link" href="/">
                <h1 class="header-item__title">Rune Nielsen | Freelance Software Developer</h1>
            </a>
        </div>     
    </div>
    <div class="header-collection">
        <div class="header-item">
            <a class="header-item__link" target="_blank" href="https://github.com/runeanielsen">
                <p class="header-item__icon">
                    <i class="fab fa-github-square"></i>
                </p>
            </a>
        </div>
        <div class="header-item">
            <a class="header-item__link" target="_blank" href="https://twitter.com/runeanielsen">
                <p class="header-item__icon">
                    <i class="fab fa-twitter-square"></i> 
                </p>
            </a>
        </div>
        <div class="header-item">
            <a class="header-item__link" target="_blank" href="https://linkedin.com/in/runeanielsen">
                <p class="header-item__icon">
                    <i class="fab fa-linkedin"></i>
                </p> 
            </a>
        </div>    
    </div>
</header>

		
<div class="blog-post">
    <div class="blog-post__content">
        <h1 id="hoisting-in-javascript">Hoisting in JavaScript</h1>
<p>In JavaScript, a variable can be declared after it has been used. In other words, a variable can be used before it has been declared, this is called <strong>hoisting</strong>. The term hoisting cannot be found in the official JavaScript documents, but the term was invented as a general way of thinking about what happens in the compilation phase when variables and function declarations are &ldquo;moved&rdquo; to the top of their containing scope. To be exact the variables are not being moved to the top of the scope, but they&rsquo;re being stored in memory doing the compile phase, so they can be used in the execution phase.</p>
<p>The following code shows an example where we declare the variable &lsquo;a&rsquo;. Because of hoisting the variable &lsquo;a&rsquo; will get hoisted to the top of the function scope and be initialized to the value assignment of 10. In a language who does not hoist, this would have thrown an error.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>;
<span style="color:#a6e22e">displayValue</span>();
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">displayValue</span>() {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">a</span>); <span style="color:#75715e">// Outputs: 10
</span><span style="color:#75715e"></span>}
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span>;
</code></pre></div><p>So a way to visualize this is by &ldquo;moving&rdquo; the variables and function declarations to the top of the code. First, the functions get moved to the top, then the variables.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">displayValue</span>() {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">a</span>);
}
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span>;
<span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>;
<span style="color:#a6e22e">displayValue</span>();
</code></pre></div><p>To prove that function declarations are moved before variable declarations, we will use the following code example. Doing the compilation phase the first function &lsquo;foo&rsquo; is moved to the top. After that, the other function &lsquo;foo&rsquo; overwrites the first function that logged &ldquo;bar&rdquo; so it now returns &ldquo;foo&rdquo;. Last the variable &lsquo;foo&rsquo; gets hoisted, but because &lsquo;foo&rsquo; already was declared as a function the declaration gets ignored.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">foo</span>(); <span style="color:#75715e">// Outputs: &#34;foo&#34;
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">foo</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">foo</span>() {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;bar&#34;</span>);
}

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">foo</span>() {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;foo&#34;</span>);
}
</code></pre></div><p>One thing to mention is that a function declaration is hoisted over a variable declaration but not over the variable assignment. To prove this statement take a look, at the code example.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">var</span> <span style="color:#66d9ef">double</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">22</span>;

<span style="color:#66d9ef">function</span> <span style="color:#66d9ef">double</span>(<span style="color:#a6e22e">num</span>) {
<span style="color:#66d9ef">return</span> (<span style="color:#a6e22e">num</span><span style="color:#f92672">*</span><span style="color:#ae81ff">4</span>);
}

<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#66d9ef">typeof</span> <span style="color:#66d9ef">double</span>); <span style="color:#75715e">// Output: number
</span></code></pre></div><h2 id="benefits-of-hoisting">Benefits of hoisting</h2>
<p>Hoisting brings the benefit that we can call a function before it has been declared as can be seen in the following code. If hoisting did not exist we would have to declare all our functions before we could use them.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">sayHello</span>(); <span style="color:#75715e">// Outputs: Hello
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">sayHello</span>() {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Hello!&#39;</span>);
}
</code></pre></div><p>A common error for many developers is that they think function expressions will be set at the compile phase, but they&rsquo;re actually set at the execution phase because of the function not being declared, but it is being assigned to a variable. Therefore this code will throw an error, at the execution phase, because the &lsquo;sayHello&rsquo; variable has not been set to a function expression.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">sayHello</span>(); <span style="color:#75715e">// Throws: sayHello is not a function
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sayHello</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> () {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Hello!&#39;</span>);
}
</code></pre></div><h2 id="es6-and-hoisting">ES6 and hoisting</h2>
<p>ES6 also known as ECMAScript 2015 bring two new ways to assign variables, <strong>let</strong> and <strong>const</strong>. They&rsquo;re interesting because they have different behavior than the <strong>var</strong> variable declaration in the case of hoisting.</p>
<h3 id="let">Let</h3>
<p>The <strong>var</strong> keyword is function scoped meaning that the variable is bound to the function in which it is declared. On the other hand, <strong>let</strong> is block scoped meaning that it is bound to the block instead of the function.</p>
<p>We learned earlier that a variable can be used before declared using the <strong>var</strong> keyword. Using <strong>let</strong> instead throws a reference error because variables declared using the <strong>let</strong> keyword are not being hoisted to the top. This behavior can be seen in the code below.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">bar</span>); <span style="color:#75715e">// Output: ReferenceError: bar is not defined
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">bar</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;foo&#39;</span>;
</code></pre></div><h3 id="const">Const</h3>
<p>The <strong>const</strong> keyword was introduced into ES6 to allow immutable variables. Immutable variables are variables who cannot be modified once assigned. Same as the <strong>let</strong> keyword <strong>const</strong> is not hoisted to the top of the block. The same exception as the <strong>let</strong> example is thrown as can be seen in the code below.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">bar</span>); <span style="color:#75715e">// ReferenceError: bar is not defined
</span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">bar</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;foo&#39;</span>;
</code></pre></div><p>The important part about this section is that ES6 gives us two new ways to declare variables and neither of them are hoisted. Variables declared with <strong>let</strong> and <strong>const</strong> remain uninitialised at the compilation phase while variables declared with <strong>var</strong> are initialised with a value of undefined and can, therefore, be used before it has been declared.</p>
<h2 id="summary">Summary</h2>
<p>JavaScript uses the concept of hoisting on variable and function declarations. Hoisting makes it possible to use a variable or a function before it has been declared, and is beneficial because it enables us to call a function before it has been declared. The problem with hoisting is that it might course confusion for people coming from a language that does not hoist.</p>
   
    </div>
</div>

		<footer class="footer">
</footer>
	
	</div>
</body>
</html>
